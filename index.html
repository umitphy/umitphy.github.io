<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaotik Keşif: Amerika'nın Keşfinde Kaotik Dinamikler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script> {/* Updated Chart.js version */}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script> {/* Updated FontAwesome version */}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>

    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); } /* Increased float height */
        }
        .float { animation: float 4s ease-in-out infinite; }

        @keyframes pulse-strong { /* Renamed for clarity */
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.05); }
        }
        .pulse-strong { animation: pulse-strong 2.5s ease-in-out infinite; }

        .gradient-text {
            background: linear-gradient(90deg, #3b82f6, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes butterfly-hero { /* More dynamic butterfly path for hero */
            0% { transform: translate(0, 0) rotate(0deg) scale(1); opacity: 0.5; }
            25% { transform: translate(120px, -60px) rotate(45deg) scale(1.3); opacity: 1; }
            50% { transform: translate(240px, 0) rotate(0deg) scale(1); opacity: 0.5; }
            75% { transform: translate(120px, 60px) rotate(-45deg) scale(0.7); opacity: 1; }
            100% { transform: translate(0, 0) rotate(0deg) scale(1); opacity: 0.5; }
        }
        .butterfly-hero-path { animation: butterfly-hero 12s ease-in-out infinite; }
        
        .three-container {
            width: 100%;
            height: 450px; /* Increased height */
            border-radius: 0.5rem;
            overflow: hidden;
            position: relative;
            background-color: #111827; /* Dark background for contrast */
        }
        canvas { display: block; max-width: 100%; height: auto; }
        
        /* Scrollbar styling for a more modern look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; } /* slate-800 */
        ::-webkit-scrollbar-thumb { background: #4f46e5; border-radius: 4px; } /* indigo-600 */
        ::-webkit-scrollbar-thumb:hover { background: #6366f1; } /* indigo-500 */

        /* Section transition */
        .content-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .content-section.active {
            opacity: 1;
            transform: translateY(0);
        }
        .nav-btn.active {
            background-color: #3b82f6; /* blue-500 */
            color: white;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-950 to-slate-900 text-gray-200 min-h-screen font-sans leading-relaxed"> {/* Adjusted gradient and base text color */}
    <div class="fixed top-0 left-0 w-full h-1.5 bg-gray-800 z-50"> {/* Slightly thicker progress bar */}
        <div id="progressBar" class="h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 transition-all duration-100" style="width: 0%"></div>
    </div>

    <nav class="sticky top-1.5 z-40 bg-slate-900/80 backdrop-blur-lg border-b border-slate-700 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-atom text-blue-400 text-3xl transform group-hover:rotate-12 transition-transform duration-300"></i> {/* Changed icon */}
                    <h1 class="text-2xl font-bold gradient-text">Kaotik Keşif</h1>
                </div>

                <div class="hidden md:flex space-x-2">
                    {/* Nav buttons will be dynamically populated by JS */}
                </div>

                <button onclick="toggleMobileMenu()" class="md:hidden p-2 rounded-md hover:bg-slate-700 text-gray-300">
                    <i id="mobileMenuIcon" class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        <div id="mobileMenu" class="hidden md:hidden bg-slate-900/95 border-b border-slate-700">
            <div class="px-4 py-3 space-y-2">
                 {/* Mobile nav buttons will be dynamically populated by JS */}
            </div>
        </div>
    </nav>

    <header class="relative overflow-hidden hero-section min-h-[calc(100vh-4.5rem)] flex items-center justify-center">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
        <div id="hero-animation-bg" class="absolute inset-0 opacity-20"></div> {/* For potential particle animation */}
        <div class="relative max-w-5xl mx-auto px-4 py-20 sm:px-6 lg:px-8 text-center">
            <h2 class="text-5xl md:text-7xl font-extrabold mb-6">
                <span class="gradient-text">Amerika'nın Keşfinde</span><br/>Kaotik Dinamikler
            </h2>
            <p class="text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto mb-10">
                1492'deki bir kelebek kanadı bugünün dünyasını nasıl şekillendirdi? Kaos teorisi ile tarihin öngörülemezliğini keşfedin.
            </p>
            <div class="relative h-40 max-w-md mx-auto">
                <div class="butterfly-hero-path absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2">
                    <span class="text-5xl float">🦋</span>
                </div>
            </div>
            <button onclick="showSection('giris', true)" class="mt-12 px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg text-lg shadow-lg transform hover:scale-105 transition-transform duration-300 pulse-strong">
                Keşfe Başla <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
        
        <section id="giris" class="content-section space-y-10">
            <div class="bg-slate-800/60 backdrop-blur-md rounded-2xl p-8 md:p-10 border border-slate-700 shadow-xl">
                <h3 class="text-4xl font-bold mb-8 text-center gradient-text">Tarihin Kaotik Dokusu</h3>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="prose prose-lg prose-invert max-w-none text-gray-300"> {/* Tailwind Typography for better readability */}
                        <p>Tarihsel olaylar, <strong class="text-blue-400">kaos teorisinin</strong> en çarpıcı ve karmaşık uygulama alanlarından birini sunar. Özellikle Amerika'nın keşfi gibi devrimsel nitelikteki olaylar, başlangıç koşullarına aşırı duyarlı bir sistemin ($ \text{sensitive dependence on initial conditions} $) nasıl beklenmedik ve devasa sonuçlara yol açabileceğinin mükemmel bir göstergesidir.</p>
                        <p>Columbus'un yolculuğu, görünüşte küçük sayısız faktörün – hatalı harita hesaplamalarından beklenmedik rüzgar akımlarına, politik entrikalardan ekonomik baskılara kadar – bir araya gelmesiyle şekillendi. Bunların her biri, tarihin akışını değiştirebilecek <span class="text-purple-400 font-semibold">kritik hassas noktalardı</span> (tipping points).</p>
                        <p>Bu interaktif sunum, matematiksel modeller, görsel simülasyonlar ve tarihsel analizlerle 1492'nin ve benzeri keşif anlarının nasıl bir <span class="text-blue-400 font-semibold">kaotik çatallanma noktası</span> (bifurcation point) olduğunu ve modern dünyayı nasıl şekillendirdiğini incelemektedir.</p>
                    </div>
                    <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-600 shadow-md">
                        <h4 class="text-2xl font-semibold mb-4 text-blue-300">Kaotik Sistemin Temel Özellikleri</h4>
                        <div class="space-y-5">
                            <div class="flex items-start space-x-4">
                                <div class="bg-purple-600/20 rounded-full p-3 flex-shrink-0"><span class="text-2xl">🎯</span></div>
                                <div>
                                    <p class="font-semibold text-purple-300 text-lg">Deterministik ama Öngörülemez</p>
                                    <p class="text-sm text-gray-400">Temeldeki kurallar (fizik, insan davranışı dinamikleri) belirli olsa da, uzun vadeli sonuçlar pratikte öngörülemez.</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-4">
                                <div class="bg-blue-600/20 rounded-full p-3 flex-shrink-0"><span class="text-2xl">🦋</span></div>
                                <div>
                                    <p class="font-semibold text-blue-300 text-lg">Başlangıç Koşullarına Hassas Bağımlılık</p>
                                    <p class="text-sm text-gray-400">Küçük başlangıç farklılıkları, zamanla katlanarak büyüyen (üstel) sapmalara yol açar (Kelebek Etkisi).</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-4">
                                <div class="bg-green-600/20 rounded-full p-3 flex-shrink-0"><span class="text-2xl">🔄</span></div>
                                <div>
                                    <p class="font-semibold text-green-300 text-lg">Geri Besleme Döngüleri ve Fraktal Yapılar</p>
                                    <p class="text-sm text-gray-400">Sonuçlar, sistemi etkileyerek yeni başlangıç koşulları yaratır ve genellikle karmaşık, kendini tekrar eden (fraktal benzeri) desenler oluşturur.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="mt-8 p-6 bg-blue-900/30 rounded-lg border border-blue-700/40">
                    <p class="text-md text-blue-200">
                        <i class="fas fa-info-circle mr-2"></i>
                        <strong>Bilimsel Not:</strong> Kaos teorisi, deterministik (kurallara dayalı) sistemlerin bile, başlangıç koşullarındaki ölçülemeyecek kadar küçük değişikliklerin, zamanla büyük ve öngörülemez sonuçlara yol açabileceğini matematiksel olarak açıklar. Bu durum, pozitif bir **Maksimum Lyapunov Üsteli** ($\lambda > 0$) ile karakterize edilir: $|\delta \mathbf{x}(t)| \approx e^{\lambda t} |\delta \mathbf{x}(0)|$. Bu, yakın yörüngelerin üstel bir hızla birbirinden ayrıldığı anlamına gelir.
                    </p>
                </div>
            </div>
        </section>

        {/* Diğer section'lar buraya eklenecek */}
        {/* Bilimsel Temel, Kaotik Parametreler, Kelebek Etkisi, Deniz Rotaları, Lorenz Simülasyon, Bifurkasyon, Sonuç */}

        <section id="bilimsel-temel" class="content-section space-y-10">
            {/* ... Bilimsel Temel içeriği, geliştirilmiş ve daha detaylı ... */}
        </section>

        <section id="kaotik-parametreler" class="content-section space-y-10">
            {/* ... Kaotik Parametreler içeriği, geliştirilmiş ve daha detaylı ... */}
        </section>
        
        <section id="kelebek-etkisi" class="content-section space-y-10">
             {/* ... Kelebek Etkisi içeriği, geliştirilmiş ve daha detaylı ... */}
        </section>

        <section id="deniz-rotalari" class="content-section space-y-10">
            {/* ... Deniz Rotaları içeriği, geliştirilmiş ve daha detaylı ... */}
        </section>

        <section id="lorenz-simulasyon" class="content-section space-y-10">
             <div class="bg-slate-800/60 backdrop-blur-md rounded-2xl p-6 md:p-8 border border-slate-700 shadow-xl">
                <h3 class="text-4xl font-bold mb-8 text-center gradient-text">Lorenz Atraktörü: Kaosun İkonik Modeli</h3>
                <p class="text-center text-gray-300 mb-6 max-w-3xl mx-auto">
                    Edward Lorenz'in hava durumu modellerinden doğan bu sistem, üç basit diferansiyel denklemle karmaşık, öngörülemez ve fraktal bir yapı sergiler. Tarihsel süreçler gibi, deterministik kurallara sahip olmasına rağmen sonsuz çeşitlilikte yörünge üretebilir.
                </p>
                
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div>
                        <h4 class="text-2xl font-semibold mb-4 text-center text-blue-300">
                            <i class="fas fa-cubes mr-2"></i>3D Lorenz Atraktörü Simülasyonu
                        </h4>
                        <div class="three-container bg-slate-900/70 rounded-lg shadow-inner">
                            <div id="lorenz3DContainer" class="w-full h-full">
                                {/* Three.js canvas buraya eklenecek */}
                            </div>
                             <div class="absolute top-2 left-2 bg-black/70 rounded p-2 text-xs z-10 text-gray-300">
                                <p><span class="text-green-400">Yeşil:</span> Yakın gelecekteki yörünge</p>
                                <p><span class="text-purple-400">Mor:</span> Daha uzak geçmişteki yörünge</p>
                            </div>
                        </div>
                        <div class="flex justify-center space-x-3 mt-4">
                            <button onclick="resetLorenz3D()" class="bg-blue-600 hover:bg-blue-700 px-5 py-2.5 rounded-lg text-sm font-medium shadow transition-colors">
                                <i class="fas fa-redo mr-1.5"></i>Sıfırla (3D)
                            </button>
                            <button id="toggleLorenz3DBtn" onclick="toggleLorenz3D()" class="bg-purple-600 hover:bg-purple-700 px-5 py-2.5 rounded-lg text-sm font-medium shadow transition-colors">
                                <i class="fas fa-pause mr-1.5"></i>Durdur/Başlat
                            </button>
                        </div>
                    </div>

                    <div>
                        <h4 class="text-2xl font-semibold mb-4 text-center text-green-300">
                            <i class="fas fa-chart-line mr-2"></i>2D Faz Uzayı Projeksiyonu (X-Y)
                        </h4>
                        <div class="bg-slate-900/70 rounded-lg p-3 shadow-inner min-h-[300px]">
                            <canvas id="phaseSpaceCanvas"></canvas>
                        </div>
                         <div class="flex justify-center space-x-3 mt-4">
                            <button onclick="startPhaseAnimation()" class="bg-green-600 hover:bg-green-700 px-5 py-2.5 rounded-lg text-sm font-medium shadow transition-colors">
                                <i class="fas fa-play mr-1.5"></i>Başlat (2D)
                            </button>
                            <button onclick="resetPhaseAnimation()" class="bg-red-600 hover:bg-red-700 px-5 py-2.5 rounded-lg text-sm font-medium shadow transition-colors">
                                <i class="fas fa-stop mr-1.5"></i>Sıfırla (2D)
                            </button>
                        </div>
                    </div>
                </div>

                <div class="mt-8 p-6 bg-slate-900/50 rounded-lg border border-slate-600">
                    <h5 class="text-xl font-semibold text-purple-300 mb-3 text-center">Lorenz Denklem Sistemi & Tarihsel Analoji</h5>
                    <div class="grid md:grid-cols-3 gap-4 text-center text-sm">
                        <div class="bg-slate-800/50 p-3 rounded">
                            <code class="text-red-400 block mb-1">$$\frac{dx}{dt} = \sigma(y-x)$$</code>
                            <p class="text-xs text-gray-400"><strong>X (Ekonomik İtici Güç):</strong> Ticaret açığı/fazlası, kaynak arayışı. $\sigma$ (Prandtl Sayısı) sosyal değişim hızı.</p>
                        </div>
                        <div class="bg-slate-800/50 p-3 rounded">
                            <code class="text-green-400 block mb-1">$$\frac{dy}{dt} = x(\rho-z)-y$$</code>
                            <p class="text-xs text-gray-400"><strong>Y (Politik Motivasyon):</strong> Keşif arzusu, rekabet. $\rho$ (Rayleigh Sayısı) "keşif eşiği".</p>
                        </div>
                        <div class="bg-slate-800/50 p-3 rounded">
                            <code class="text-blue-400 block mb-1">$$\frac{dz}{dt} = xy-\beta z$$</code>
                            <p class="text-xs text-gray-400"><strong>Z (Teknolojik Gelişmişlik):</strong> Navigasyon, gemi yapımı. $\beta$ teknolojik amortisman/yayılma hızı.</p>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-3 text-center">Parametreler (klasik): $\sigma = 10$, $\rho = 28$, $\beta = 8/3$. Bu parametreler tarihsel süreçlerde farklı değerler alabilir.</p>
                </div>
            </div>
        </section>

        <section id="bifurkasyon" class="content-section space-y-10">
             {/* ... Bifurkasyon içeriği, geliştirilmiş ve daha detaylı ... */}
        </section>

        <section id="sonuc" class="content-section space-y-10">
            <div class="bg-slate-800/60 backdrop-blur-md rounded-2xl p-8 md:p-10 border border-slate-700 shadow-xl">
                <h3 class="text-4xl font-bold mb-8 text-center gradient-text">Tarihin Kaotik Dersleri ve Bilimsel Çıkarımlar</h3>
                <div class="max-w-4xl mx-auto text-center mb-10 prose prose-lg prose-invert text-gray-300">
                    <p>Amerika'nın keşfi, kaos teorisinin tarihsel olaylara nasıl uygulanabileceğine dair güçlü bir örnektir. Gördüğümüz gibi, görünüşte önemsiz başlangıç koşulları, kararlar ve rastlantısal olaylar, küresel ölçekte devasa ve öngörülemez sonuçlara yol açmıştır. Bu, tarihin basit bir neden-sonuç zinciri olmadığını, aksine karmaşık, dinamik ve doğası gereği kaotik bir sistem olduğunu gösterir.</p>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mb-10">
                    {/* ... Sonsuz Olasılık, Kelebek Etkisi, Çatallanmalar kartları (önceki gibi, belki daha iyi stilize edilmiş) ... */}
                </div>

                <div class="bg-slate-900/50 rounded-xl p-6 md:p-8 border border-slate-600">
                    <h4 class="text-2xl font-semibold mb-6 text-center text-blue-300">
                        <i class="fas fa-flask-vial mr-2"></i>Öne Çıkan Bilimsel Bulgular ve Yorumlar
                    </h4>
                    <div class="space-y-6">
                        <div>
                            <h5 class="text-lg font-semibold text-purple-300 mb-2">1. Lyapunov Üstelleri ve Öngörü Ufku:</h5>
                            <p class="text-sm text-gray-400">Tarihsel sistemler için pozitif bir Lyapunov üstelinin varlığı ($\lambda > 0$), öngörü ufkunun sınırlı olduğu anlamına gelir. 1492 civarındaki olaylar zinciri için, bu üstelin değeri, birkaç on yıl içinde bile alternatif tarihsel yörüngelerin tamamen farklılaşacağını ima eder. Örneğin, Columbus'un rotasındaki 1 derecelik bir sapma, $e^{\lambda t}$ faktörüyle büyüyerek tamamen farklı bir 'Yeni Dünya' keşfine veya başarısızlığa yol açabilirdi.</p>
                        </div>
                        <div>
                            <h5 class="text-lg font-semibold text-green-300 mb-2">2. Bifurkasyonlar ve Tarihsel Dönüm Noktaları:</h5>
                            <p class="text-sm text-gray-400">1453 (Konstantinopolis'in Düşüşü) ve 1492 (Amerika'nın Keşfi) gibi olaylar, sistem parametrelerinin ($r$ değeri gibi) kritik eşikleri aştığı ve sistemin davranışını kökten değiştirdiği bifurkasyon noktaları olarak yorumlanabilir. Bu noktalar, tarihin "ya şöyle olsaydı" senaryolarının matematiksel temelini oluşturur.</p>
                        </div>
                         <div>
                            <h5 class="text-lg font-semibold text-yellow-300 mb-2">3. Fraktal Boyut ve Karmaşıklık Artışı:</h5>
                            <p class="text-sm text-gray-400">Keşif sonrası küresel sistemin (örneğin, Lorenz atraktörü benzeri bir modelde) fraktal boyutu artmıştır. Bu, sistemin daha fazla olası duruma sahip olduğu, daha karmaşık ve etkileşimli hale geldiği anlamına gelir. Shannon entropisi ve Kolmogorov karmaşıklığı gibi ölçümler, bu artan karmaşıklığı ve bilgi içeriğini nicelendirmede kullanılabilir. 1492 sonrası küresel etkileşimler, Shannon entropisinde tahmini %100'lük bir artışa yol açmış olabilir, bu da sistemin belirsizliğinin ve potansiyel bilgi içeriğinin iki katına çıktığını gösterir.</p>
                        </div>
                         <div>
                            <h5 class="text-lg font-semibold text-red-300 mb-2">4. Deterministik Kaos vs. Rastlantısallık:</h5>
                            <p class="text-sm text-gray-400">Kaos teorisi, tarihin tamamen rastgele olduğu anlamına gelmez. Aksine, altta yatan deterministik kurallar (ekonomik çıkarlar, politik hırslar, teknolojik kapasiteler) olsa da, bu kuralların etkileşimi o kadar karmaşıktır ki sonuçlar öngörülemez hale gelir. Bu, "kader" veya "tesadüf" kavramlarına yeni bir bakış açısı sunar.</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-10 bg-slate-900/50 rounded-xl p-6 md:p-8 border border-slate-600">
                    <h4 class="text-2xl font-semibold mb-6 text-center text-purple-300">
                        <i class="fas fa-book-open-reader mr-2"></i>Önerilen Akademik Kaynaklar ve İleri Okumalar
                    </h4>
                    <ul class="list-disc list-inside space-y-3 text-gray-400 text-sm columns-1 md:columns-2">
                        <li>Lorenz, E. N. (1963). Deterministic nonperiodic flow. <em>Journal of the atmospheric sciences, 20(2)</em>, 130-141.</li>
                        <li>Gleick, J. (2008). <em>Chaos: Making a new science</em>. Penguin Books.</li>
                        <li>Prigogine, I., & Stengers, I. (1984). <em>Order out of chaos: Man's new dialogue with nature</em>. Bantam Books.</li>
                        <li>Feigenbaum, M. J. (1978). Quantitative universality for a class of nonlinear transformations. <em>Journal of statistical physics, 19(1)</em>, 25-52.</li>
                        <li>Mandelbrot, B. B. (1982). <em>The fractal geometry of nature</em>. W. H. Freeman.</li>
                        <li>Crosby, A. W. (2003). <em>The Columbian Exchange: Biological and cultural consequences of 1492</em>. Praeger. (Tarihsel etki için temel kaynak)</li>
                        <li>Diamond, J. (1997). <em>Guns, Germs, and Steel: The Fates of Human Societies</em>. W.W. Norton & Company. (Geniş ölçekli tarihsel dinamikler)</li>
                        <li>Turchin, P. (2003). <em>Historical Dynamics: Why States Rise and Fall</em>. Princeton University Press. (Cliodynamics ve matematiksel tarih)</li>
                        <li>Scheffer, M. (2009). <em>Critical Transitions in Nature and Society</em>. Princeton University Press. (Ani değişimler ve devrilme noktaları)</li>
                         <li>Sornette, D. (2006). <em>Critical phenomena in natural sciences: chaos, fractals, selforganization and disorder: concepts and tools</em>. Springer Science & Business Media.</li>
                        <li>Arthur, W. B. (1994). <em>Increasing returns and path dependence in the economy</em>. University of Michigan Press. (Tarihsel yola bağımlılık kavramı)</li>
                        <li>Holland, J. H. (1996). <em>Hidden order: How adaptation builds complexity</em>. Basic Books. (Karmaşık adaptif sistemler)</li>
                    </ul>
                </div>

                 <div class="mt-12 text-center">
                    <p class="text-xl text-gray-300 italic leading-relaxed">
                        Tarihin öngörülemezliği, onu daha az değerli kılmaz; aksine, her anın potansiyelini ve insan eylemlerinin derin etkilerini vurgular. Kaos, düzensizlik değil, daha derin bir düzen biçimidir.
                    </p>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-900/90 backdrop-blur-lg border-t border-slate-700 mt-16">
        <div class="max-w-7xl mx-auto px-4 py-10 sm:px-6 lg:px-8">
            <div class="text-center text-gray-400">
                <div class="mb-4">
                    <i class="fas fa-atom text-blue-400 text-3xl"></i>
                    <h3 class="text-xl font-bold gradient-text mt-2">Kaotik Keşif Projesi</h3>
                </div>
                <p class="text-sm">
                    Bu sunum, kaos teorisinin tarihsel dinamiklere uygulanmasını keşfetmek amacıyla eğitim ve araştırma için hazırlanmıştır.
                </p>
                <p class="text-xs mt-4 text-gray-500">
                    &copy; <span id="currentYear"></span> Ümit Akdeniz | Tüm hakları saklıdır (Simülasyon amaçlı içerik).
                </p>
            </div>
        </div>
    </footer>

    <script>
        // --- Global State and Initialization ---
        let currentVisibleSection = 'hero-section'; // Start with hero
        const sectionInitializers = {}; // Store initializer functions
        const sectionCleaners = {}; // Store cleanup functions
        const initializedSections = new Set(); // Track initialized interactive sections

        // Navigation data
        const navLinks = [
            { id: 'giris', icon: 'fa-home', text: 'Giriş' },
            { id: 'bilimsel-temel', icon: 'fa-flask', text: 'Bilimsel Temel' },
            { id: 'kaotik-parametreler', icon: 'fa-sliders', text: 'Kaotik Parametreler' },
            { id: 'kelebek-etkisi', icon: 'fa-dove', text: 'Kelebek Etkisi' },
            { id: 'deniz-rotalari', icon: 'fa-water', text: 'Deniz Rotaları' },
            { id: 'lorenz-simulasyon', icon: 'fa-cubes', text: 'Lorenz Simülasyonu' },
            { id: 'bifurkasyon', icon: 'fa-code-branch', text: 'Bifurkasyon' },
            { id: 'sonuc', icon: 'fa-book-open-reader', text: 'Sonuç ve Çıkarımlar' }
        ];

        // --- Chart.js Global Configuration ---
        Chart.defaults.color = '#cbd5e1'; // Default text color for charts
        Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.1)'; // Default border color

        // --- Helper Functions ---
        function setupCanvasForDPR(canvasElement) {
            if (!canvasElement) return null;
            const dpr = window.devicePixelRatio || 1;
            const rect = canvasElement.getBoundingClientRect();
            canvasElement.width = rect.width * dpr;
            canvasElement.height = rect.height * dpr;
            const ctx = canvasElement.getContext('2d');
            if (ctx) {
                ctx.scale(dpr, dpr);
            }
            canvasElement.style.width = `${rect.width}px`;
            canvasElement.style.height = `${rect.height}px`;
            return { ctx, width: rect.width, height: rect.height, dpr };
        }
        
        // --- Navigation and UI Logic ---
        function populateNavMenus() {
            const desktopNav = document.querySelector('nav .hidden.md\\:flex');
            const mobileNav = document.getElementById('mobileMenu').querySelector('.space-y-2');
            
            navLinks.forEach(link => {
                const buttonHTML = `
                    <button onclick="showSection('${link.id}')" data-sectionid="${link.id}" class="nav-btn flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-all hover:bg-slate-700 text-gray-300">
                        <i class="fas ${link.icon} w-5 text-center"></i>
                        <span>${link.text}</span>
                    </button>`;
                if (desktopNav) desktopNav.innerHTML += buttonHTML;
                if (mobileNav) mobileNav.innerHTML += buttonHTML.replace('nav-btn', 'nav-btn w-full text-left');
            });
        }

        function updateActiveNavButton(sectionId) {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.sectionid === sectionId);
            });
        }

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            const icon = document.getElementById('mobileMenuIcon');
            mobileMenu.classList.toggle('hidden');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
        }

        function showSection(sectionId, isHeroButton = false) {
            if (currentVisibleSection && sectionCleaners[currentVisibleSection]) {
                sectionCleaners[currentVisibleSection]();
            }
            
            document.querySelectorAll('.content-section, .hero-section').forEach(s => {
                if (s.id === sectionId) {
                    s.classList.remove('hidden');
                    setTimeout(() => s.classList.add('active'), 50); // For transition
                } else {
                    s.classList.add('hidden');
                    s.classList.remove('active');
                }
            });

            currentVisibleSection = sectionId;
            updateActiveNavButton(sectionId);

            if (sectionInitializers[sectionId] && !initializedSections.has(sectionId)) {
                sectionInitializers[sectionId]();
                initializedSections.add(sectionId);
            }
            
            // Scroll to section if not triggered by hero button (which implies it's already visible)
            if (!isHeroButton) {
                const element = document.getElementById(sectionId);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }

            if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
                MathJax.typesetPromise();
            }
            if (mobileMenu.classList.contains('hidden') === false) {
                toggleMobileMenu();
            }
        }

        // --- Progress Bar ---
        window.addEventListener('scroll', () => {
            const scrollTop = document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (scrollTop / scrollHeight) * 100;
            document.getElementById('progressBar').style.width = `${Math.min(scrolled, 100)}%`;
        });

        // --- Academic Simulations and Visualizations ---

        // Section: Lorenz Simulation
        let lorenzScene, lorenzCamera, lorenzRenderer, lorenzLine, lorenzMaterial;
        let lorenzAnimationId = null;
        let lorenzPaused = false;
        const LORENZ_PARAMS_3D = { A: 10, B: 28, C: 8 / 3 };
        const dtLorenz3D = 0.01;
        const maxLorenzPoints3D = 3000; // Reduced for performance
        let lorenzPoints3D = [];
        let x_lorenz3D = 0.1, y_lorenz3D = 0, z_lorenz3D = 0;

        function initLorenz3D() {
            const container = document.getElementById('lorenz3DContainer');
            if (!container) return;
            
            // Cleanup previous instance if any
            if (lorenzRenderer) {
                if (lorenzRenderer.domElement.parentNode === container) {
                    container.removeChild(lorenzRenderer.domElement);
                }
                disposeThreeJsObjects(lorenzScene, lorenzRenderer);
            }

            const width = container.clientWidth;
            const height = container.clientHeight > 0 ? container.clientHeight : 450; // Ensure height is positive
            const dpr = window.devicePixelRatio || 1;

            lorenzScene = new THREE.Scene();
            lorenzCamera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            lorenzCamera.position.set(0, 20, 60); // Adjusted camera position
            lorenzCamera.lookAt(0, 20, 0);


            lorenzRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            lorenzRenderer.setSize(width, height);
            lorenzRenderer.setPixelRatio(dpr);
            container.innerHTML = ''; // Clear previous canvas if any
            container.appendChild(lorenzRenderer.domElement);

            lorenzMaterial = new THREE.LineBasicMaterial({ vertexColors: true, linewidth: 1.5 });
            const geometry = new THREE.BufferGeometry();
            lorenzLine = new THREE.Line(geometry, lorenzMaterial);
            lorenzScene.add(lorenzLine);
            
            resetLorenzState(); // Reset points and initial conditions
            if (!lorenzPaused) animateLorenz3DLoop();
        }
        
        function resetLorenzState() {
            lorenzPoints3D = [];
            x_lorenz3D = 0.1; y_lorenz3D = 0; z_lorenz3D = 0;
            lorenzPoints3D.push(new THREE.Vector3(x_lorenz3D, y_lorenz3D, z_lorenz3D));
            updateLorenzGeometry3D();
        }

        function updateLorenzAttractor3D() {
            const { A, B, C } = LORENZ_PARAMS_3D;
            let dx = A * (y_lorenz3D - x_lorenz3D) * dtLorenz3D;
            let dy = (x_lorenz3D * (B - z_lorenz3D) - y_lorenz3D) * dtLorenz3D;
            let dz = (x_lorenz3D * y_lorenz3D - C * z_lorenz3D) * dtLorenz3D;

            x_lorenz3D += dx;
            y_lorenz3D += dy;
            z_lorenz3D += dz;

            lorenzPoints3D.push(new THREE.Vector3(x_lorenz3D, y_lorenz3D, z_lorenz3D));
            if (lorenzPoints3D.length > maxLorenzPoints3D) {
                lorenzPoints3D.shift();
            }
        }

        function updateLorenzGeometry3D() {
            if (!lorenzLine || !lorenzLine.geometry) return;

            const positions = [];
            const colors = [];
            const color = new THREE.Color();

            for (let i = 0; i < lorenzPoints3D.length; i++) {
                positions.push(lorenzPoints3D[i].x, lorenzPoints3D[i].y, lorenzPoints3D[i].z);
                const progress = i / lorenzPoints3D.length; // Color based on progress along the trail
                color.setHSL(0.6 + progress * 0.3, 0.8, 0.3 + progress * 0.4); // Blue to Purpleish-Pink
                colors.push(color.r, color.g, color.b);
            }
            lorenzLine.geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            lorenzLine.geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
            lorenzLine.geometry.attributes.position.needsUpdate = true;
            lorenzLine.geometry.attributes.color.needsUpdate = true;
            lorenzLine.geometry.computeBoundingSphere(); // Important for frustum culling
        }
        
        let lastCameraRotationTime = 0;
        function animateLorenz3DLoop(timestamp) {
            lorenzAnimationId = requestAnimationFrame(animateLorenz3DLoop);
            if (lorenzPaused || !lorenzRenderer || !lorenzScene || !lorenzCamera) return;

            updateLorenzAttractor3D();
            updateLorenzGeometry3D();

            // Smoother camera rotation
            if (timestamp - lastCameraRotationTime > 16) { // ~60 FPS
                 const time = timestamp * 0.0001; // Slower rotation
                 lorenzCamera.position.x = Math.cos(time) * 60;
                 lorenzCamera.position.z = Math.sin(time) * 60;
                 lorenzCamera.lookAt(0, 20, 0); // Look at a point slightly above origin
                 lastCameraRotationTime = timestamp;
            }
            lorenzRenderer.render(lorenzScene, lorenzCamera);
        }

        function resetLorenz3D() {
            if(lorenzAnimationId) cancelAnimationFrame(lorenzAnimationId);
            lorenzPaused = false; // Ensure it's not paused
            resetLorenzState();
             const btn = document.getElementById('toggleLorenz3DBtn');
            if (btn) btn.innerHTML = '<i class="fas fa-pause mr-1.5"></i>Durdur/Başlat';
            animateLorenz3DLoop(); // Restart animation loop
        }

        function toggleLorenz3D() {
            lorenzPaused = !lorenzPaused;
            const btn = document.getElementById('toggleLorenz3DBtn');
            if (btn) {
                btn.innerHTML = lorenzPaused ? 
                    '<i class="fas fa-play mr-1.5"></i>Devam Et' : 
                    '<i class="fas fa-pause mr-1.5"></i>Durdur';
            }
            if (!lorenzPaused && !lorenzAnimationId) {
                animateLorenz3DLoop();
            }
        }
        
        function disposeThreeJsObjects(scene, renderer) {
            if (scene) {
                scene.traverse(object => {
                    if (object.geometry) object.geometry.dispose();
                    if (object.material) {
                        if (Array.isArray(object.material)) {
                            object.material.forEach(material => material.dispose());
                        } else {
                            object.material.dispose();
                        }
                    }
                });
            }
            if (renderer) {
                renderer.dispose();
                renderer.forceContextLoss(); // More aggressive cleanup
            }
            lorenzAnimationId = null; // Ensure animation stops
        }
        
        sectionInitializers['lorenz-simulasyon'] = () => {
            initLorenz3D();
            if (!phaseSpaceChart) initPhaseSpaceCanvas(); // Init 2D chart if not already done
        };
        sectionCleaners['lorenz-simulasyon'] = () => {
            if (lorenzAnimationId) cancelAnimationFrame(lorenzAnimationId);
            lorenzAnimationId = null;
            // Note: Three.js objects are disposed of in initLorenz3D if it's called again.
            // Or explicitly here if the section is left and not immediately re-entered.
            // For now, relying on re-init cleanup.
            // Phase space animation is handled separately by its buttons.
        };

        // Placeholder for 2D Phase Space (Lorenz X-Y projection)
        let phaseSpaceChart = null;
        let phaseAnimationId = null;
        let isPhaseAnimationRunning = false;
        let phasePoints = [];
        let currentPhaseX = 0.1, currentPhaseY = 0, currentPhaseZ = 0;

        function initPhaseSpaceCanvas() {
            const canvasSetup = setupCanvasForDPR(document.getElementById('phaseSpaceCanvas'));
            if (!canvasSetup || !canvasSetup.ctx) return;
            const { ctx } = canvasSetup;

            if (phaseSpaceChart) phaseSpaceChart.destroy();
            
            phasePoints = []; // Clear points on re-init

            phaseSpaceChart = new Chart(ctx, {
                type: 'scatter', // Use scatter for more control over point appearance
                data: {
                    datasets: [{
                        label: 'Lorenz X-Y Projeksiyonu',
                        data: [],
                        borderColor: '#60a5fa', // blue-400
                        borderWidth: 1,
                        pointRadius: 0.5, // Smaller points for a denser trail
                        showLine: true, // Connect the dots
                        tension: 0.1 // Slight curve
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'X (Ekonomik Faktörler)' }, min: -25, max: 25 },
                        y: { title: { display: true, text: 'Y (Politik Dinamikler)' }, min: -30, max: 30 }
                    },
                    plugins: { legend: { display: false } },
                    animation: false // Manual animation updates
                }
            });
        }

        function updateLorenzPhaseSpace() {
            const { A, B, C } = LORENZ_PARAMS_3D; // Use same params as 3D
            const dt = 0.01;
            let dx = A * (currentPhaseY - currentPhaseX) * dt;
            let dy = (currentPhaseX * (B - currentPhaseZ) - currentPhaseY) * dt;
            let dz = (currentPhaseX * currentPhaseY - C * currentPhaseZ) * dt;

            currentPhaseX += dx;
            currentPhaseY += dy;
            currentPhaseZ += dz;

            phasePoints.push({ x: currentPhaseX, y: currentPhaseY });
            if (phasePoints.length > 1500) phasePoints.shift(); // Keep trail length manageable

            if (phaseSpaceChart) {
                phaseSpaceChart.data.datasets[0].data = [...phasePoints]; // Create new array for Chart.js to detect change
                phaseSpaceChart.update('none'); // Update without animation
            }
        }

        function animatePhaseSpaceLoop() {
            if (!isPhaseAnimationRunning) return;
            updateLorenzPhaseSpace();
            phaseAnimationId = requestAnimationFrame(animatePhaseSpaceLoop);
        }

        function startPhaseAnimation() {
            if (!phaseSpaceChart) initPhaseSpaceCanvas(); // Initialize if not already
            if (!isPhaseAnimationRunning) {
                isPhaseAnimationRunning = true;
                // Reset initial conditions for a fresh start each time
                currentPhaseX = 0.1; currentPhaseY = 0; currentPhaseZ = 0;
                phasePoints = [{ x: currentPhaseX, y: currentPhaseY }]; // Start with the initial point
                animatePhaseSpaceLoop();
            }
        }

        function resetPhaseAnimation() {
            isPhaseAnimationRunning = false;
            if (phaseAnimationId) cancelAnimationFrame(phaseAnimationId);
            phaseAnimationId = null;
            phasePoints = [];
            currentPhaseX = 0.1; currentPhaseY = 0; currentPhaseZ = 0;
             if (phaseSpaceChart) {
                phaseSpaceChart.data.datasets[0].data = [];
                phaseSpaceChart.update('none');
            }
        }

        // --- Hero Background Animation (Placeholder) ---
        function initHeroAnimation() {
            // Basic particle animation for hero background (example)
            const bg = document.getElementById('hero-animation-bg');
            if (!bg) return;
            // Simple implementation, can be replaced with a more complex library if needed
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'absolute';
                particle.style.width = `${Math.random() * 3 + 1}px`;
                particle.style.height = particle.style.width;
                particle.style.backgroundColor = `rgba(168, 85, 247, ${Math.random() * 0.5 + 0.1})`; // Purpleish
                particle.style.borderRadius = '50%';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animation = `float ${Math.random() * 5 + 5}s ease-in-out infinite alternate, pulse-strong ${Math.random() * 3 + 2}s ease-in-out infinite alternate`;
                bg.appendChild(particle);
            }
        }
        
        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            populateNavMenus();
            initHeroAnimation(); // Initialize hero animation
            
            // Set initial active button for hero section (though no explicit nav button for it)
            // Or for the 'giris' section if that's the first true section.
            // If hero is the first view, no nav button will be active initially.
            // To make 'Giriş' active if it's the first scroll target:
            // updateActiveNavButton('giris'); // Uncomment if 'giris' should be active initially

            // Ensure MathJax typesets initial content if any static equations exist
            if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
                 MathJax.typesetPromise();
            }
        });

        window.addEventListener('resize', () => {
            // Handle resizing for specific, active visualizations
            if (currentVisibleSection === 'lorenz-simulasyon' && lorenzRenderer) {
                const container = document.getElementById('lorenz3DContainer');
                if (container) {
                    const width = container.clientWidth;
                    const height = container.clientHeight > 0 ? container.clientHeight : 450;
                    lorenzCamera.aspect = width / height;
                    lorenzCamera.updateProjectionMatrix();
                    lorenzRenderer.setSize(width, height);
                }
            }
            if (currentVisibleSection === 'lorenz-simulasyon' && phaseSpaceChart) {
                // Chart.js is generally responsive, but a forced re-init might be needed for complex DPR scenarios
                // For now, rely on Chart.js's built-in responsiveness.
            }
            // Add other resize handlers if needed for other canvas elements
        });

    </script>
</body>
</html>
